# 리눅스에서 ls 명령을 입력했을 때 디렉토리 정보 읽어오기

## 1. 사용자 입력

사용자가 터미널에 `ls` 명령을 입력한다.

## 2. Shell 및 시스템 콜

사용자의 명령이 쉘에 의해 해석되고, `ls` 명령이 실행되어 해당 명령에 대한 시스템 콜이 호출된다.

## 3. VFS(Virtual File System) 및 시스템 콜

VFS는 파일 시스템에 대한 추상화 계층으로, 시스템 콜을 통해 VFS에 `ls` 명령이 전달된다. VFS는 이 명령을 실제 파일 시스템에 전달한다.

## 4. 파일 시스템 드라이버

파일 시스템 드라이버는 VFS에서 전달받은 `ls` 명령을 처리한다. 이 단계에서는 파일 시스템의 디렉토리 구조를 읽어오고, 파일 및 디렉토리의 메타데이터(파일 크기, 생성일자, 권한 등)를 읽어와야 한다.

## 5. 디스크 I/O 및 블록 할당

파일 시스템은 디렉토리 구조 및 파일 메타데이터를 디스크에서 읽어오기 위해 디스크 I/O를 수행한다. 디스크 I/O는 블록 단위로 이루어지며, 디렉토리의 내용과 파일 메타데이터가 저장된 블록을 읽어와야 한다.

## 6. 커널 메모리 및 버퍼 캐시

읽어온 블록은 커널 메모리에 저장되며, 필요한 경우 버퍼 캐시에도 저장된다. 이렇게 함으로써 동일한 블록에 대한 반복적인 I/O 요청을 방지하고 성능을 향상시킨다.

## 7. 결과 출력

파일 시스템 드라이버는 읽어온 디렉토리 정보 및 파일 메타데이터를 VFS에 반환한다. VFS는 이 정보를 시스템 콜을 호출한 프로세스에게 반환하고, 최종적으로 쉘은 이 정보를 사용자에게 출력한다.

## 8. 사용자 출력

쉘은 사용자 터미널에 디렉토리의 내용을 나타내는 결과를 출력한다.