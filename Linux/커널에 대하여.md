## 리눅스 커널

### 1. 커널의 역할

커널은 하드웨어 자원을 효과적으로 관리하고, 프로세스의 생성, 실행, 종료를 감독합니다. 또한, 메모리 할당과 해제, 파일 시스템 관리를 담당하여 시스템의 안정성과 효율성을 유지한다.

### 2. 커널 모듈

리눅스 커널은 동적으로 모듈을 로드하고 언로드할 수 있다. 모듈은 커널에 추가 기능을 제공하며, 필요에 따라 커널에 추가될 수 있다.

### 3. 시스템 콜

커널은 사용자 공간 프로세스가 하드웨어 리소스에 접근하기 위해 시스템 콜을 제공한다. 이는 응용 프로그램이 커널의 서비스를 사용할 수 있도록 하는 인터페이스다.

### 4. 스케줄러

리눅스 커널은 프로세스 스케줄링을 담당하며, 다양한 스케줄링 알고리즘을 지원하고 프로세스에 대한 CPU 할당을 효율적으로 관리한다.

### 5. 인터럽트 처리

커널은 하드웨어로부터 발생하는 인터럽트를 처리하고, 이를 적절한 핸들러에게 전달하여 시스템이 적절하게 대응할 수 있도록 한다.

### 6. 가상 파일 시스템 (VFS)

가상 파일 시스템은 여러 파일 시스템을 표준화된 인터페이스로 관리하며, 각 파일 시스템에 대한 접근을 추상화한다.

### 7. 네트워크 스택

리눅스 커널은 TCP/IP 기반의 네트워킹을 지원하며, 네트워크 통신과 관련된 다양한 프로토콜을 처리한다.

### 8. 디바이스 드라이버

하드웨어와 통신하여 하드웨어를 관리하는 드라이버를 포함하고 있다.

리눅스 커널은 오픈 소스로, 소스 코드에 대한 접근이 가능하며 커널의 수정이나 커스터마이징이 가능하다. 커널의 변경사항은 새로운 리눅스 커널 릴리스로 반영될 수 있다.

## 리눅스 커널 설정 변경하기

리눅스 커널의 설정을 변경하려면 주로 `make menuconfig`, `make xconfig`, 또는 `make config`과 같은 도구를 사용한다. 이러한 도구를 사용하면 커널 소스 코드의 구성 옵션을 선택하고 변경할 수 있다.

### 1. `make menuconfig` 명령어

커널 소스 코드 디렉터리에서 다음 명령을 입력하여 메뉴 기반의 설정 화면을 열 수 있다.

```bash
make menuconfig
```

1. **메뉴 내비게이션:**
   - ↑, ↓ 키로 이동하며, `<Space>` 키로 옵션을 선택하고, `<Enter>` 키로 세부 옵션에 들어간다.

2. **기능 추가 또는 제거:**
   - 필요한 기능을 추가하거나 제거할 수 있다. 이는 파일 시스템 지원, 네트워크 프로토콜 선택 등에 해당한다.

3. **편집 및 활성화/비활성화:**
   - 개별 옵션을 선택하여 편집하고, 해당 옵션을 활성화 또는 비활성화할 수 있다.

4. **저장 및 종료:**
   - 변경사항을 저장하고 나가려면 'Save' 및 'Exit' 옵션을 사용한다.

### 2. 대표적인 설정 변경 예시

#### - CPU 타입 지정하기

- **변경 위치:** Processor type and features → Processor family

- **설명:** 해당 옵션을 통해 컴파일할 때 사용할 CPU의 패밀리를 지정할 수 있다. 예를 들어, AMD Ryzen을 사용한다면 "Opteron/Athlon64/Hammer/K8"을 선택할 수 있다.

#### - 모듈 지원 활성화하기

- **변경 위치:** General setup → [*] Enable loadable module support

- **설명:** 커널에서 모듈을 지원하도록 활성화한다. 모듈을 사용하면 커널의 일부를 동적으로 로드하여 필요할 때 시스템을 업데이트할 수 있다.

#### - 디버깅 지원 활성화하기

- **변경 위치:** Kernel hacking → [*] Kernel debugging

- **설명:** 커널 디버깅을 위한 옵션을 활성화합니다. 이 설정은 커널 디버깅이나 트레이스를 수행할 때 유용하다.

### 3. 변경 사항 적용 및 컴파일

설정을 변경한 후에는 변경 사항을 적용하고 커널을 다시 컴파일해야 한다. 변경된 설정은 새로운 커널을 빌드하고 설치한 후에 적용된다.

```bash
make
make modules_install
make install
```

위 명령을 통해 새로운 커널을 빌드하고 모듈을 설치하며, 커널을 시스템에 설치한다. 이후 재부팅하면 변경된 설정이 반영된 새로운 커널이 적용된다.

이렇게하여, 사용자는 리눅스 커널을 필요에 맞게 구성하고 최적화할 수 있다.